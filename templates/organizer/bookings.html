{% extends "layout_org.html" %}
{% block org_title %}My Bookings{% endblock %}

{% block org_content %}
<div class="table-responsive">
<table class="table table-striped">
    <thead>
        <tr>
            <th>Event Name</th>
            <th>Hall</th>
            <th>Dates</th>
            <th>People</th>
            <th>Hall Total (₹)</th>
            <th>Food Plates</th>
            <th>Food Total (₹)</th>
            <th>Type</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for booking in bookings %}
        <tr class="{{ 'table-success' if booking.status == 'approved' else 'table-warning' }}">
            <td>{{ booking.event_name }}</td>
            <td>{{ booking.hall_name }}</td>
<td>
  {% if booking.combined_type == 'Food Only' and booking.from_date == booking.to_date %}
      {{ booking.from_date }}
  {% else %}
      {{ booking.from_date }} to {{ booking.to_date }}
  {% endif %}
</td>



            <td>{{ booking.num_people }}</td>

            <!-- hall total (same as old Total column) -->
            <td>₹{{ booking.total_price }}</td>

            <!-- food plates -->
            <td>
                {% if booking.combined_type == 'Hall + Food' or booking.combined_type == 'Food Only' %}
                    {{ booking.food_plates or '-' }}
                {% else %}
                    -
                {% endif %}
            </td>

            <!-- food total -->
            <td>
                {% if booking.combined_type == 'Hall + Food' or booking.combined_type == 'Food Only' %}
                    ₹{{ booking.food_total or 0 }}
                {% else %}
                    -
                {% endif %}
            </td>

            <!-- type -->
            <td>{{ booking.combined_type or 'Hall Only' }}</td>

            <!-- status badge (unchanged) -->
            <td>
                <span class="badge bg-{{ 'success' if booking.status == 'approved' else 'warning' }}">
                    {{ booking.status.upper() }}
                </span>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</div>
{% endblock %}
