{% extends "layout_admin.html" %}
{% block title %}Manage Bookings - Admin{% endblock %}

{% block admin_content %}
<h3 class="mb-4">All Bookings</h3>

{% if bookings %}
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Organizer</th>
                <th>Hall</th>
                <th>Event Name</th>
                <th>From</th>
                <th>To</th>
                <th>People</th>
                <th>Total (₹)</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for booking in bookings %}
            <tr>
                <td>{{ booking.organizer_name }}</td>
                <td>{{ booking.hall_name }}</td>
                <td>{{ booking.event_name or 'N/A' }}</td>
                <td>{{ booking.from_date }}</td>
                <td>{{ booking.to_date }}</td>
                <td>{{ booking.num_people }}</td>
                <td>₹{{ booking.total_price }}</td>
                <td>
                    {% set status = booking.get('status', 'pending') %}
                    <span class="badge bg-{{ 'success' if status == 'approved' else 'warning' }}">
                        {{ status.upper() }}
                    </span>
                </td>
                <td>
                    {% if booking.get('status', 'pending') == 'pending' %}
                    <a href="{{ url_for('admin.approve', booking_id=booking._id) }}"
                       class="btn btn-sm btn-success">
                        Approve
                    </a>
                    {% else %}
                    <span class="text-success">✓ Approved</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info">
    No bookings found.
</div>
{% endif %}
{% endblock %}
